var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(function(a){'undefined'!=typeof module&&'undefined'!=typeof exports&&this===exports?module.exports=a(require('vue')):this.Vue.component('VueWordCloud',a(this.Vue))}).call(this,function(){var a=Math.min,b=Math.floor,c=function(a){function b(){var a;_classCallCheck(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=_possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(d)));return f.name='CancelError',f}return _inherits(b,a),b}(Error),d=function(a,b){return a+(b-a)*Math.random()},e=function(a){var b=new Blob([a]),c=URL.createObjectURL(b);return new Worker(c)},f=function(a){return new Promise(function(b,c){var d,e=function(a){d(a),b(a.data)},f=function(a){d(a),c(a)};d=function(b){b.preventDefault(),a.removeEventListener('message',e),a.removeEventListener('error',f)},a.addEventListener('message',e),a.addEventListener('error',f)})},g=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return new Promise(function(b){return setTimeout(b,a)})},h=function(a){return'function'==typeof a},i=function(a,b){var c=new Set;return a.filter(function(a){return(a=b(a),!c.has(a))&&(c.add(a),!0)})},j=function(b,c){var d=Infinity,e=!0,f=!1,g=void 0;try{for(var h,i,j=b[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i=h.value,d=a(c(i),d)}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}return d},k=function(a,b){var c=-Infinity,d=!0,e=!1,f=void 0;try{for(var g,h,i=a[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h=g.value,c=Math.max(b(h),c)}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c},l=function(a){return 2*a*Math.PI},m=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=arguments[3],e=arguments[4],f=a,g=c,h=b;if(d===e)return d;if(g===h)return f<=g?d:e;var i=f;return i=(i-g)/(h-g),i=i*(e-d)+d,i},n={renderer:function renderer(){return this.domRenderer},normalizedWords:function normalizedWords(){var a=this,b=this.words.map(function(b){var c,d,e,f,g,h,i,j;if(b)switch('undefined'==typeof b?'undefined':_typeof(b)){case'string':{c=b;break}case'object':{if(Array.isArray(b)){var k=_slicedToArray(b,2);c=k[0],d=k[1]}else c=b.text,d=b.weight,e=b.rotation,f=b.fontFamily,g=b.fontStyle,h=b.fontVariant,i=b.fontWeight,j=b.color;break}}return void 0===c&&('function'==typeof a.text?c=a.text(b):c=a.text),void 0===d&&('function'==typeof a.weight?d=a.weight(b):d=a.weight),void 0===e&&('function'==typeof a.rotation?e=a.rotation(b):e=a.rotation),void 0===f&&('function'==typeof a.fontFamily?f=a.fontFamily(b):f=a.fontFamily),void 0===g&&('function'==typeof a.fontStyle?g=a.fontStyle(b):g=a.fontStyle),void 0===h&&('function'==typeof a.fontVariant?h=a.fontVariant(b):h=a.fontVariant),void 0===i&&('function'==typeof a.fontWeight?i=a.fontWeight(b):i=a.fontWeight),void 0===j&&('function'==typeof a.color?j=a.color(b):j=a.color),{text:c,weight:d,rotation:e,fontFamily:f,fontStyle:g,fontVariant:h,fontWeight:i,color:j}});b=b.filter(function(a){var b=a.text;return b}),b=b.filter(function(a){var b=a.weight;return 0<b}),b=i(b,function(a){var b=a.text;return b}),b.sort(function(a,b){return b.weight-a.weight});var c=j(b,function(a){var b=a.weight;return b}),d=k(b,function(a){var b=a.weight;return b});if(this.fontSizeRatio){var e=!0,f=!1,g=void 0;try{for(var h,l,n=b[Symbol.iterator]();!(e=(h=n.next()).done);e=!0)l=h.value,l.weight=m(l.weight,d,c,1,this.fontSizeRatio)}catch(a){f=!0,g=a}finally{try{!e&&n.return&&n.return()}finally{if(f)throw g}}}else{var o=!0,p=!1,q=void 0;try{for(var r,s,t=b[Symbol.iterator]();!(o=(r=t.next()).done);o=!0)s=r.value,s.weight/=c}catch(a){p=!0,q=a}finally{try{!o&&t.return&&t.return()}finally{if(p)throw q}}}return b}},o=function(){var c=async function(a,b,c,d,e,f,g){var h=Math.ceil,j=Math.sin,k=Math.abs,m=Math.cos;g=l(g);var n=[d,e,f,c+'px',b].join(' ');try{await document.fonts.load(n,a)}catch(a){}var o=document.createElement('canvas').getContext('2d');o.font=n;var p=o.measureText(a).width,q=c,r=h(p*k(m(g))+q*k(j(g))),s=h(p*k(j(g))+q*k(m(g))),t=new Uint8Array(r*s);if(0<t.length){var u=document.createElement('canvas').getContext('2d');u.canvas.width=r,u.canvas.height=s,u.translate(r/2,s/2),u.rotate(g),u.font=n,u.textAlign='center',u.textBaseline='middle',u.fillText(a,0,0);for(var v=u.getImageData(0,0,r,s).data,w=0,i=t.length;w<i;++w)t[w]=v[4*w+3]}return{textWidth:p,textHeight:q,rectWidth:r,rectHeight:s,rectData:t}},d=async function(a,d,g,h){var i=[],j=e("var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var RectCenterOutIterator=regeneratorRuntime.mark(function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return regeneratorRuntime.wrap(function(w){for(var x=Math.ceil,y=Math.floor;;)switch(w.prev=w.next){case 0:if(!(0<a&&0<b)){w.next=76;break}if(c=void 0,d=void 0,a>b?(c=1,d=b/a):b>a?(d=1,c=a/b):c=d=1,e=y(a/2),f=y(b/2),g=a-e,h=b-f,!(e<g)){w.next=17;break}i=e;case 9:if(!(i<=g)){w.next=15;break}return w.next=12,[i,f];case 12:++i,w.next=9;break;case 15:w.next=25;break;case 17:if(!(f<h)){w.next=25;break}j=f;case 19:if(!(j<=h)){w.next=25;break}return w.next=22,[e,j];case 22:++j,w.next=19;break;case 25:k=e,l=f,m=g,n=h;case 29:if(!(g<a||h<b)){w.next=76;break}if(e-=c,f-=d,g+=c,h+=d,o=y(e),p=y(f),q=x(g),r=x(h),!(q>m)){w.next=46;break}s=p;case 40:if(!(s<r)){w.next=46;break}return w.next=43,[q,s];case 43:++s,w.next=40;break;case 46:if(!(r>n)){w.next=54;break}t=q;case 48:if(!(t>o)){w.next=54;break}return w.next=51,[t,r];case 51:--t,w.next=48;break;case 54:if(!(o<k)){w.next=62;break}u=r;case 56:if(!(u>p)){w.next=62;break}return w.next=59,[o,u];case 59:--u,w.next=56;break;case 62:if(!(p<l)){w.next=70;break}v=o;case 64:if(!(v<q)){w.next=70;break}return w.next=67,[v,p];case 67:++v,w.next=64;break;case 70:k=o,l=p,m=q,n=r,w.next=29;break;case 76:case'end':return w.stop();}},RectCenterOutIterator,this)}),AsyncQueue=function(){function a(){_classCallCheck(this,a),this._values=[]}return _createClass(a,[{key:'enqueue',value:function enqueue(a){this._values.push(a),this._promise&&this._resolvePromise()}},{key:'dequeue',value:async function dequeue(){for(var a=this;;){if(this._values.length)return this._values.shift();this._promise||(this._promise=new Promise(function(b){a._resolvePromise=b})),await this._promise,this._promise=void 0}}}]),a}();(async function(){var a=this,b=new AsyncQueue;this.addEventListener('message',function(a){var c=a.data;b.enqueue(c)});for(var c=await b.dequeue(),d=c.gridWidth,e=c.gridHeight,f=new Uint8Array(d*e),g=async function(){for(var c=await b.dequeue(),g=c.rectWidth,h=c.rectHeight,i=c.rectData,j=[],k=0;k<g;++k)for(var l=0;l<h;++l)i[g*l+k]&&j.push([k,l]);a.postMessage(function(){var a=!0,b=!1,c=void 0;try{for(var g,h,i=function(){var a=_slicedToArray(g.value,2),b=a[0],c=a[1];if(function(){var a=[],e=!0,g=!1,h=void 0;try{for(var i,j=occupiedRectPixels[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=_slicedToArray(i.value,2),l=k[0],m=k[1];if(l+=b,m+=c,f[d*m+l])return!1;a.push([l,m])}}catch(a){g=!0,h=a}finally{try{!e&&j.return&&j.return()}finally{if(g)throw h}}var n=!0,o=!1,p=void 0;try{for(var q,r=a[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=_slicedToArray(q.value,2),t=s[0],u=s[1];f[d*u+t]=1}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}return!0}())return{v:{rectLeft:b,rectTop:c}}},j=RectCenterOutIterator(d-rectWidth,e-rectHeight)[Symbol.iterator]();!(a=(g=j.next()).done);a=!0)if(h=i(),'object'===('undefined'==typeof h?'undefined':_typeof(h)))return h.v}catch(a){b=!0,c=a}finally{try{!a&&j.return&&j.return()}finally{if(b)throw c}}throw new Error}())};;)await g()}).call(self);");try{var I=4194304,J=b(Math.sqrt(d/g*I)),K=b(I/J);j.postMessage({gridWidth:J,gridHeight:K});var k=!0,l=!1,m=void 0;try{for(var n,o,p=h[Symbol.iterator]();!(k=(n=p.next()).done);k=!0){o=n.value,a.throwIfCanceled();try{var q=o.text,r=o.weight,s=o.rotation,t=o.fontFamily,u=o.fontStyle,v=o.fontVariant,w=o.fontWeight,x=o.color,y=4*r,z=await c(q,t,y,u,v,w,s),A=z.textWidth,B=z.textHeight,C=z.rectWidth,D=z.rectHeight,E=z.rectData;j.postMessage({rectWidth:C,rectHeight:D,rectData:E});var F=await f(j),G=F.rectLeft,H=F.rectTop;i.push({text:q,rotation:s,fontFamily:t,fontSize:y,fontStyle:u,fontVariant:v,fontWeight:w,rectLeft:G,rectTop:H,rectWidth:C,rectHeight:D,textWidth:A,textHeight:B,color:x})}catch(a){}}}catch(a){l=!0,m=a}finally{try{!k&&p.return&&p.return()}finally{if(l)throw m}}}finally{j.terminate()}return i},g=function(b,c,d,e){var f=j(b,function(a){var b=a.rectLeft;return b}),g=k(b,function(a){var b=a.rectLeft,c=a.rectWidth;return b+c}),h=j(b,function(a){var b=a.rectTop;return b}),i=k(b,function(a){var b=a.rectTop,c=a.rectHeight;return b+c}),l=a(c/(g-f),d/(i-h)),m=k(b,function(a){var b=a.fontSize;return b})*l;m>e&&(l*=e/m);var n=!0,o=!1,p=void 0;try{for(var q,r,s=b[Symbol.iterator]();!(n=(q=s.next()).done);n=!0)r=q.value,r.rectLeft=(r.rectLeft-(f+g)/2)*l+c/2,r.rectTop=(r.rectTop-(h+i)/2)*l+d/2,r.rectWidth*=l,r.rectHeight*=l,r.textWidth*=l,r.textHeight*=l,r.fontSize*=l}catch(a){o=!0,p=a}finally{try{!n&&s.return&&s.return()}finally{if(o)throw p}}};return async function(a){var b=this.containerWidth,c=this.containerHeight;if(0>=b||0>=c)return[];var e=this.maxFontSize,f=this.normalizedWords;await a.delayIfNotCanceled();var h=await d(a,b,c,f);return await a.delayIfNotCanceled(),g(h,b,c,e),await a.delayIfNotCanceled(),h}}(),p={boundedWords:{get:o,default:function Function_stubArray(){return[]}}},q={},r={updateContainerSize:{method:function method(){if(this.mounted&&this.$el){var a=this.$el.getBoundingClientRect(),b=a.width,c=a.height;this.containerWidth=b,this.containerHeight=c}},interval:function interval(){return this.containerSizeUpdateInterval}}},s={domRenderer:function domRenderer(a){var b=[].concat(_toConsumableArray(this.boundedWords)),c=b.length,d=this.animationDuration/2,e=this.animationEasing;return a('div',{style:{position:'relative',width:'100%',height:'100%',overflow:'hidden'}},b.map(function(b,f){var g=Math.round,h=b.text,i=b.color,j=b.fontFamily,k=b.fontSize,l=b.fontStyle,m=b.fontVariant,n=b.fontWeight,o=b.rotation,p=b.rectLeft,q=b.rectTop,r=b.rectWidth,s=b.rectHeight,t=b.textWidth,u=b.textHeight;return a('div',{key:h,style:{position:'absolute',left:p+r/2-t/2+'px',top:q+s/2+'px',color:i,font:[l,m,n,k+'px/0',j].join(' '),transform:'rotate('+o+'turn)',whiteSpace:'nowrap',transition:['all',g(d)+'ms',e,g(d/c*f)+'ms'].join(' ')}},h)}))},canvasRenderer:function canvasRenderer(){var a=document.createElement('canvas'),b=a.getContext('2d');return this.boundedWords.forEach(function(a){var c=a.text,d=a.color,e=a.fontFamily,f=a.fontSize,g=a.fontStyle,h=a.fontVariant,i=a.fontWeight,j=a.rotation,k=a.rectLeft,m=a.rectTop,n=a.rectWidth,o=a.rectHeight,p=a.textWidth,q=a.textHeight;b.save(),b.font=[g,h,i,f+'px',e].join(' '),b.fillStyle=d,b.textAlign='center',b.textBaseline='middle',b.fillText(c,0,0),b.translate(k+n/2,m+o/2),b.rotate(l(j)),b.restore()}),a},svgRenderer:function svgRenderer(){}};return function(){var a=function(){function a(){_classCallCheck(this,a),this.canceled=!1}return _createClass(a,[{key:'cancel',value:function cancel(){this.canceled=!0}},{key:'throwIfCanceled',value:function throwIfCanceled(){if(this.canceled)throw new c}},{key:'delayIfNotCanceled',value:async function delayIfNotCanceled(a){this.throwIfCanceled(),await g(a),this.throwIfCanceled()}}]),a}();Object.entries(p).forEach(function(b){var c,d=_slicedToArray(b,2),e=d[0],f=d[1],g='duqugwtjleyi$'+e,h='xvvzxtpxrfjr$'+e;Object.assign(n,(c={},_defineProperty(c,g,function(){return this[h]()}),_defineProperty(c,h,function(){var b;return async function(){var c;b&&b.cancel();for(var d=b=new a,e=arguments.length,g=Array(e),h=0;h<e;h++)g[h]=arguments[h];var i=await(c=f.get).call.apply(c,[this,d].concat(g));return d.throwIfCanceled(),i}}),c)),Object.assign(q,_defineProperty({},g,{handler:async function handler(a){try{this[e]=await a}catch(a){}},immediate:!0}))})}(),function(){Object.entries(r).forEach(function(a){var b,c=_slicedToArray(a,2),d=c[0],e=c[1],f='wkoojrkxgnng$'+d,g='ozyvltnleyhp$'+d;Object.assign(s,_defineProperty({},d,e.method)),Object.assign(n,(b={},_defineProperty(b,f,function(){return this[g]()}),_defineProperty(b,g,function(){var a;return function(){var b=this;clearTimeout(a);var c=function(){b.destroyed||(a=setTimeout(c,h(e.interval)?e.interval.call(b):e.interval),b[d]())};c()}}),b)),Object.assign(q,_defineProperty({},f,{handler:function handler(){},immediate:!0}))})}(),{render:function render(a){return this.renderer(a)},props:{words:{type:Array,default:function _default(){return[]}},text:{type:[String,Function],default:''},weight:{type:[Number,Function],default:1},rotation:{type:[String,Function],default:function _default(){var a=[0,0.75];return function(){return a[b(Math.random()*a.length)]}}},fontFamily:{type:[String,Function],default:'serif'},fontStyle:{type:[String,Function],default:'normal'},fontVariant:{type:[String,Function],default:'normal'},fontWeight:{type:[String,Function],default:'normal'},color:{type:[String,Function],default:'Black'},fontSizeRatio:{type:Number},maxFontSize:{type:Number,default:Infinity},animationDuration:{type:Number,default:5e3},animationEasing:{type:String,default:'ease'},containerSizeUpdateInterval:{type:Number,default:1e3}},data:function(){var a=this,b={mounted:!1,destroyed:!1,animatedBoundedWords:[],containerWidth:0,containerHeight:0};return Object.entries(p).forEach(function(c){var d=_slicedToArray(c,2),e=d[0],f=d[1];b[e]=h(f.default)?f.default.call(a):f.default}),b},mounted:function mounted(){this.mounted=!0},beforeDestroy:function beforeDestroy(){this.destroyed=!0},computed:n,watch:q,methods:s}});